#! /usr/bin/env ruby

require 'pp'
require './fastaiterator.rb'

seq = "GTCATGGACCATGGATAATTAAGTGTGTG"

if ARGV.empty?
  puts "usage: #{$0} fasta-file"
  exit 0
end

begin
  myFasta = FastaIterator.new(ARGV[0])
rescue => err
  puts "ERROR: #{err}"
  exit 1
end

myFasta.each do |header,seq|
  cnt = seq.scan /(?=(ATG([ATGC]{3})*?(TGA|TA[AG])))/
  puts seq
  pp cnt
end
